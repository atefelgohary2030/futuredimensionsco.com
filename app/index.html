<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <meta name="theme-color" content="#061427" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>Future Dimensions</title>
  
  <style>
    :root {
      --bg: #061427;
      --panel: #0A1C38;
      --panel2: #0E274A;
      --text: #F7F0E1;
      --muted: #D8CDB6;
      --muted2: #BCAF8F;
      /* تم تعديل الشفافية هنا لزيادة وضوح الخطوط الذهبية */
      --line: rgba(210,172,82,.40); 
      --brand: #D2AC52;
      --brand2: #F7E69B;
      --brand3: #B68C38;
      
      --navyDeep: #061427;
      --navyMid: #0A1C38;
      --goldGrad: linear-gradient(135deg, #B68C38 0%, #F7E69B 50%, #D2AC52 100%);
      --glass: rgba(255,255,255,0.03);
      --glassBorder: rgba(210,172,82,0.15);
    }

    /* الحفاظ على التنسيقات الأصلية مع تعزيز الذهبي */
    body {
      margin: 0; background: var(--bg); color: var(--text);
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      -webkit-user-select: none; user-select: none;
      overflow: hidden; height: 100vh; width: 100vw;
    }

    .gold-text { color: var(--brand2) !important; font-weight: bold; }
    .gold-border { border: 1px solid var(--brand) !important; }
    
    /* إضافة اللوجو في الهيدر */
    .app-header {
      height: 60px; display: flex; align-items: center; justify-content: space-between;
      padding: 0 20px; background: var(--panel); border-bottom: 1.5px solid var(--brand);
    }
    
    .logo-container { display: flex; align-items: center; gap: 10px; }
    .logo-img { width: 35px; height: 35px; border-radius: 5px; border: 1px solid var(--brand3); }

    /* تحسين الأزرار لتكون ذهبية أكثر */
    .primary-btn {
      background: var(--goldGrad); color: var(--navyDeep);
      border: none; border-radius: 12px; padding: 14px;
      font-weight: 700; font-size: 16px; cursor: pointer;
    }

    /* تنسيق قائمة الفواتير لتكون مفعلة */
    .invoice-card {
      background: var(--panel2); border: 1px solid var(--line);
      border-radius: 15px; padding: 15px; margin-bottom: 12px;
      display: flex; justify-content: space-between; align-items: center;
    }
  </style>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>

  <div id="app">
    <div class="app-header">
      <div class="logo-container">
        <img src="https://www.futuredimensionsco.com/wp-content/uploads/2023/05/cropped-Future-Dimensions-Logo-1-192x192.png" class="logo-img" alt="FD">
        <span class="gold-text">أبعاد المستقبل</span>
      </div>
      <div id="lang-toggle" style="color: var(--brand2); font-size: 14px; cursor:pointer;">EN</div>
    </div>

    <div id="main-content" style="padding: 20px; height: calc(100vh - 130px); overflow-y: auto;">
       <div id="home-view">
          <h2 class="gold-text">مرحباً بك</h2>
          <p>شركة أبعاد المستقبل ترحب بك، د. عاطف الجوهري وفريق العمل جاهزون لخدمتك.</p>
          
          <div class="invoice-card" onclick="switchView('invoices')">
            <span>عرض الفواتير والمدفوعات</span>
            <i data-lucide="chevron-left" style="color:var(--brand)"></i>
          </div>
          
          <div class="invoice-card" onclick="alert('جاري فتح التذاكر...')">
            <span>فتح تذكرة دعم فني</span>
            <i data-lucide="ticket" style="color:var(--brand)"></i>
          </div>
       </div>

       <div id="invoices-view" style="display:none;">
          <h3 class="gold-text">الفواتير والمستندات</h3>
          <div id="invoices-list">
             <p style="font-size: 12px; opacity: 0.6;">جاري سحب البيانات من السيرفر...</p>
          </div>
          <button class="primary-btn" style="width:100%; margin-top:20px;" onclick="switchView('home')">العودة للرئيسية</button>
       </div>
    </div>

    <div style="height: 70px; background: var(--panel); border-top: 1px solid var(--line); display:flex; justify-content: space-around; align-items: center;">
      <div onclick="switchView('home')" style="text-align:center; color:var(--brand2)"><i data-lucide="home"></i><div style="font-size:10px">الرئيسية</div></div>
      <div onclick="switchView('invoices')" style="text-align:center; color:var(--muted)"><i data-lucide="file-text"></i><div style="font-size:10px">الفواتير</div></div>
      <div style="text-align:center; color:var(--muted)"><i data-lucide="user"></i><div style="font-size:10px">حسابي</div></div>
    </div>
  </div>

  <script>
    // تهيئة الأيقونات
    lucide.createIcons();

    // إعدادات الربط مع Supabase (مشروعك الخاص)
    const SB_URL = "https://mifottrhqimqzojiyytq.supabase.co";
    const SB_KEY = "قم_بوضع_مفتاح_ANON_الخاص_بك_هنا"; 
    const supabase = supabase.createClient(SB_URL, SB_KEY);

    function switchView(view) {
      document.getElementById('home-view').style.display = view === 'home' ? 'block' : 'none';
      document.getElementById('invoices-view').style.display = view === 'invoices' ? 'block' : 'none';
      if(view === 'invoices') loadInvoices();
    }

    async function loadInvoices() {
      const { data, error } = await supabase.from('invoices').select('*');
      const list = document.getElementById('invoices-list');
      if (error) {
        list.innerHTML = "<p>لا توجد بيانات حالياً في جدول الفواتير.</p>";
      } else {
        list.innerHTML = data.map(inv => `
          <div class="invoice-card">
            <div>
              <div style="font-weight:bold">فاتورة #${inv.id}</div>
              <div style="font-size:11px; color:var(--muted)">بتاريخ: ${inv.created_at.split('T')[0]}</div>
            </div>
            <div style="color:var(--brand2)">${inv.amount || 0} SAR</div>
          </div>
        `).join('');
      }
    }

    // تبديل اللغة مع الحفاظ على الاتجاه
    let currentLang = 'ar';
    document.getElementById('lang-toggle').onclick = function() {
      currentLang = currentLang === 'ar' ? 'en' : 'ar';
      document.documentElement.dir = currentLang === 'ar' ? 'rtl' : 'ltr';
      this.innerText = currentLang === 'ar' ? 'EN' : 'AR';
      // هنا تضاف الترجمة للنصوص
    };
  </script>
</body>
</html>
